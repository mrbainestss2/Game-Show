<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Great Mr Baines Game Show</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="introModal" class="modal">
        <div class="modal-content">
            <h2>Welcome to The Drop!</h2>
            <p>You have <strong>$1,000,000</strong>.</p>
            <p>1. Move your money onto the answers you think are correct.</p>
            <p>2. You must leave at least one trapdoor empty!</p>
            <p>3. When ready, the Host will click the correct letter to reveal the answer.</p>
            <button class="btn-start" onclick="closeModal()">LET'S PLAY!</button>
        </div>
    </div>

    <header>
        <img src="banner.jpg" alt="The Great Mr Baines Game Show" class="header-banner">
        
        <div class="timer-container">
            <div class="timer-bar" id="timerBar"></div>
        </div>

        <div class="balance-display">$<span id="totalMoney">1000000</span></div>
        <div class="status-bar">
            <span>Allocated: <span id="allocatedDisplay">0</span></span>
            <span class="remaining-msg" id="remainingDisplay">Remaining: 1,000,000</span>
        </div>
    </header>

    <div class="grid-container">
        <div class="drop-box" id="box-A">
            <span class="box-label">A</span>
            <input type="number" class="amount-input" placeholder="0">
            <div class="quick-add">
                <button data-amt="25000">+25k</button>
                <button data-amt="100000">+100k</button>
                <button class="btn-all-in">ALL</button>
                <button class="btn-clear">X</button>
            </div>
        </div>

        <div class="drop-box" id="box-B">
            <span class="box-label">B</span>
            <input type="number" class="amount-input" placeholder="0">
            <div class="quick-add">
                <button data-amt="25000">+25k</button>
                <button data-amt="100000">+100k</button>
                <button class="btn-all-in">ALL</button>
                <button class="btn-clear">X</button>
            </div>
        </div>

        <div class="drop-box" id="box-C">
            <span class="box-label">C</span>
            <input type="number" class="amount-input" placeholder="0">
            <div class="quick-add">
                <button data-amt="25000">+25k</button>
                <button data-amt="100000">+100k</button>
                <button class="btn-all-in">ALL</button>
                <button class="btn-clear">X</button>
            </div>
        </div>

        <div class="drop-box" id="box-D">
            <span class="box-label">D</span>
            <input type="number" class="amount-input" placeholder="0">
            <div class="quick-add">
                <button data-amt="25000">+25k</button>
                <button data-amt="100000">+100k</button>
                <button class="btn-all-in">ALL</button>
                <button class="btn-clear">X</button>
            </div>
        </div>
    </div>

    <div class="controls">
        <div style="text-align: center; color: #aaa; margin-bottom: 15px;">
            <em>Host: Click a letter above to reveal the answer.</em>
        </div>

        <button class="btn-next" id="btnNext">START NEXT ROUND</button>
        
        <div style="margin-top: 20px; border-top: 1px solid #5A2D76; padding-top: 15px;">
            <label>Set New Game Amount:</label>
            <input type="number" id="startAmount" value="1000000" style="padding: 5px;">
            <button class="btn-reset" id="btnReset">NEW GAME</button>
        </div>
    </div>

    <script src="game.js"></script>
    <script>
        // 1. Setup the music
        // We use a timestamp ?v=1 to force the browser to reload the file and not use a cached version
        const bgMusic = new Audio('./sounds/background.mp3?v=1');
        bgMusic.loop = true;
        bgMusic.volume = 0.2;

        function closeModal() {
            // Hide the modal
            const modal = document.getElementById('introModal');
            if (modal) {
                modal.style.display = 'none';
            } else {
                alert("Error: Could not find the modal window.");
            }

            // Try to play
            bgMusic.play()
                .then(() => {
                    // Success! Music is playing.
                    console.log("Music started successfully.");
                })
                .catch(error => {
                    // FAILED. Tell us why.
                    alert("Music Error: " + error.message);
                });
        }
    </script>
</body>
</html>



